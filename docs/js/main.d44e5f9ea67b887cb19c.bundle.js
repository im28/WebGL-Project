(self.webpackChunkwebpack_boilerplate=self.webpackChunkwebpack_boilerplate||[]).push([[179],{733:(t,e,i)=>{"use strict";var s=1e-6,r="undefined"!=typeof Float32Array?Float32Array:Array;function n(){var t=new r(3);return r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function a(t,e,i){var s=new r(3);return s[0]=t,s[1]=e,s[2]=i,s}function o(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function h(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t}function u(t,e){var i=e[0],s=e[1],r=e[2],n=i*i+s*s+r*r;return n>0&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function l(t,e,i){var s=e[0],r=e[1],n=e[2],a=i[0],o=i[1],h=i[2];return t[0]=r*h-n*o,t[1]=n*a-s*h,t[2]=s*o-r*a,t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function c(){var t=new r(16);return r!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function f(t,e,i){var s,r,n,a,o,h,u,l,c,f,g,p,v=i[0],d=i[1],m=i[2];return e===t?(t[12]=e[0]*v+e[4]*d+e[8]*m+e[12],t[13]=e[1]*v+e[5]*d+e[9]*m+e[13],t[14]=e[2]*v+e[6]*d+e[10]*m+e[14],t[15]=e[3]*v+e[7]*d+e[11]*m+e[15]):(s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],f=e[9],g=e[10],p=e[11],t[0]=s,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=h,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=g,t[11]=p,t[12]=s*v+o*d+c*m+e[12],t[13]=r*v+h*d+f*m+e[13],t[14]=n*v+u*d+g*m+e[14],t[15]=a*v+l*d+p*m+e[15]),t}function g(t,e,i,s,r){var n,a=1/Math.tan(e/2);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(n=1/(s-r),t[10]=(r+s)*n,t[14]=2*r*s*n):(t[10]=-1,t[14]=-2*s),t}function p(t,e,i,r){var n,a,o,h,u,l,c,f,g,p,v=e[0],d=e[1],m=e[2],y=r[0],b=r[1],M=r[2],w=i[0],x=i[1],T=i[2];return Math.abs(v-w)<s&&Math.abs(d-x)<s&&Math.abs(m-T)<s?function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}(t):(c=v-w,f=d-x,g=m-T,n=b*(g*=p=1/Math.hypot(c,f,g))-M*(f*=p),a=M*(c*=p)-y*g,o=y*f-b*c,(p=Math.hypot(n,a,o))?(n*=p=1/p,a*=p,o*=p):(n=0,a=0,o=0),h=f*o-g*a,u=g*n-c*o,l=c*a-f*n,(p=Math.hypot(h,u,l))?(h*=p=1/p,u*=p,l*=p):(h=0,u=0,l=0),t[0]=n,t[1]=h,t[2]=c,t[3]=0,t[4]=a,t[5]=u,t[6]=f,t[7]=0,t[8]=o,t[9]=l,t[10]=g,t[11]=0,t[12]=-(n*v+a*d+o*m),t[13]=-(h*v+u*d+l*m),t[14]=-(c*v+f*d+g*m),t[15]=1,t)}n();var v=i(970),d=i(677),m=i(485),y=i(537),b=i(820),M=i(422);function w(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.program=this.gl.createProgram();var i=e.createShader(e.VERTEX_SHADER),s=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,document.getElementById("vertex-shader").text),e.compileShader(i),this.gl.attachShader(this.program,i),e.shaderSource(s,document.getElementById("fragment-shader").text),e.compileShader(s),this.gl.attachShader(this.program,s),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)?console.log("program linked successfully"):(console.log("program failed to link:"+this.gl.getProgramInfoLog(this.program)),console.log(e.getShaderInfoLog(s))),e.detachShader(this.program,i),e.detachShader(this.program,s),e.deleteShader(i),e.deleteShader(s)}var e,i;return e=t,(i=[{key:"destructor",value:function(){this.gl.deletePrograme(this.program)}},{key:"use",value:function(){this.gl.useProgram(this.program)}},{key:"unuse",value:function(){this.gl.useProgram(null)}},{key:"set1i",value:function(t,e){this.use(),this.gl.uniform1i(this.gl.getUniformLocation(this.program,e),t),this.unuse()}},{key:"set1f",value:function(t,e){this.use(),this.gl.uniform1f(this.gl.getUniformLocation(this.program,e),t),this.unuse()}},{key:"set2fv",value:function(t,e){this.use(),this.gl.uniform2fv(this.gl.getUniformLocation(this.program,e),t),this.unuse()}},{key:"set3fv",value:function(t,e){this.use(),this.gl.uniform3fv(this.gl.getUniformLocation(this.program,e),t),this.unuse()}},{key:"set4fv",value:function(t,e){this.use(),this.gl.uniform4fv(this.gl.getUniformLocation(this.program,e),t),this.unuse()}},{key:"setMat3fv",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.use(),this.gl.uniformMatrix3fv(this.gl.getUniformLocation(this.program,e),i,t),this.unuse()}},{key:"setMat4fv",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.use(),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(this.program,e),i,t),this.unuse()}}])&&w(e.prototype,i),t}();function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Math.radians=function(t){return t*Math.PI/180};var A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n();T(this,t),this.ViewMatrix=c(),this.movementSpeed=.05,this.sensitivity=.5,this.worldUp=i,this.position=e,this.front=n(),this.right=n(),this.up=i,this.pitch=0,this.yaw=-90,this.roll=0,this.updateCameraVectors()}var e,i;return e=t,(i=[{key:"updateCameraVectors",value:function(){this.front[0]=Math.cos(Math.radians(this.yaw)*Math.cos(Math.radians(this.pitch))),this.front[1]=Math.sin(Math.radians(this.pitch)),this.front[2]=Math.sin(Math.radians(this.yaw)*Math.cos(Math.radians(this.pitch)));var t=n();u(this.front,this.front),u(this.right,l(t,this.front,this.worldUp)),u(this.up,l(t,this.right,this.front))}},{key:"getViewMatrix",value:function(){this.updateCameraVectors();var t=o(n(),this.position,this.front);return p(this.ViewMatrix,this.position,t,this.up),this.ViewMatrix}},{key:"getPosition",value:function(){return this.position}},{key:"move",value:function(t,e){switch(e){case 1:h(this.position,this.position,this.front,this.movementSpeed*t);break;case 2:h(this.position,this.position,this.front,-this.movementSpeed*t);break;case 3:h(this.position,this.position,this.right,-this.movementSpeed*t);break;case 4:h(this.position,this.position,this.right,this.movementSpeed*t);break;case 5:h(this.position,this.position,this.up,this.movementSpeed*t);break;case 6:h(this.position,this.position,this.up,-this.movementSpeed*t)}}},{key:"updateMouseInput",value:function(t,e,i){this.pitch+=i*this.sensitivity*t,this.yaw+=e*this.sensitivity*t,this.pitch>80?this.pitch=80:this.pitch<-80&&(this.pitch=-80),(this.yaw>360||this.yaw<-360)&&(this.yaw=0),console.log(e,i,this.pitch,this.yaw)}},{key:"updateInput",value:function(t,e,i){this.updateMouseInput(t,e,i)}}])&&E(e.prototype,i),t}();function k(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var P=function(){function t(e,i,s){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=i,this.gl=s,this.texture=s.createTexture(),this.image=new Image,this.image.src=e,this.callback=function(){s.bindTexture(s.TEXTURE_2D,r.texture),s.texParameteri(r.type,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(r.type,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(r.type,s.TEXTURE_MIN_FILTER,s.LINEAR_MIPMAP_LINEAR),s.texParameteri(r.type,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,r.image),s.generateMipmap(s.TEXTURE_2D)},this.image.addEventListener("load",this.callback)}var e,i;return e=t,(i=[{key:"getID",value:function(){return this.texture}},{key:"bind",value:function(t){this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.type,this.texture)}},{key:"unbind",value:function(){this.gl.activeTexture(null),this.gl.bindTexture(this.type,null)}}])&&k(e.prototype,i),t}();function _(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var R,L=function(){function t(e,i,s,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ambient=e,this.diffuse=i,this.specular=s,this.diffuseTex=r,this.specularTex=n}var e,i;return e=t,(i=[{key:"sendToShader",value:function(t){t.set3fv(this.ambient,"material.ambient"),t.set3fv(this.diffuse,"material.diffuse"),t.set3fv(this.specular,"material.specular"),t.set1i(this.diffuseTex,"material.diffuseTex"),t.set1i(this.specularTex,"material.specularTex")}}])&&_(e.prototype,i),t}();function S(t,e){var i=new r(2);return i[0]=t,i[1]=e,i}R=new r(2),r!=Float32Array&&(R[0]=0,R[1]=0);var U=function t(e,i,s,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=e,this.color=i,this.texcoord=s,this.normal=r};function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=X(t);if(e){var r=X(this).constructor;i=Reflect.construct(s,arguments,r)}else i=s.apply(this,arguments);return V(this,i)}}function V(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var B=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];D(this,t),this.vertices=e,this.indices=i}var e,i;return e=t,(i=[{key:"set",value:function(t,e){this.vertices=t,this.indices=e}},{key:"getVertices",value:function(){return this.vertices}},{key:"getIndices",value:function(){return this.indices}},{key:"getNrOfVertices",value:function(){return this.vertices.length}},{key:"getNrOfIndices",value:function(){return this.indices.length}}])&&j(e.prototype,i),t}(),N=function(t){I(i,t);var e=F(i);function i(){var t;D(this,i),t=e.call(this);var s=[new U(a(-.5,.5,0),a(1,0,0),S(0,1),a(0,0,1)),new U(a(-.5,-.5,0),a(0,1,0),S(0,0),a(0,0,1)),new U(a(.5,-.5,0),a(0,0,1),S(1,0),a(0,0,1)),new U(a(.5,.5,0),a(1,1,0),S(1,1),a(0,0,1))];return t.set(s,[0,1,2,0,2,3]),t}return i}(B),Y=function(t){I(i,t);var e=F(i);function i(){var t;D(this,i),t=e.call(this);var s=[new U(a(0,.5,0),a(1,0,0),S(.5,1),a(0,0,1)),new U(a(-.5,-.5,.5),a(0,1,0),S(0,0),a(0,0,1)),new U(a(.5,-.5,.5),a(0,0,1),S(1,0),a(0,0,1)),new U(a(0,.5,0),a(1,1,0),S(.5,1),a(-1,0,0)),new U(a(-.5,-.5,-.5),a(0,0,1),S(0,0),a(-1,0,0)),new U(a(-.5,-.5,.5),a(0,0,1),S(1,0),a(-1,0,0)),new U(a(0,.5,0),a(1,1,0),S(.5,1),a(0,0,-1)),new U(a(.5,-.5,-.5),a(0,0,1),S(0,0),a(0,0,-1)),new U(a(-.5,-.5,-.5),a(0,0,1),S(1,0),a(0,0,-1)),new U(a(0,.5,0),a(1,1,0),S(.5,1),a(1,0,0)),new U(a(.5,-.5,-.5),a(0,0,1),S(0,0),a(1,0,0)),new U(a(.5,-.5,.5),a(0,0,1),S(1,0),a(1,0,0))];return t.set(s,[]),t}return i}(B);function H(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return W(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?W(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function G(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var q=function(){function t(e,i,s,r,n,a,o,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ModelMatrix=c(),this.position=s,this.origin=r,this.rotation=n,this.scale=a,this.vertexArray=e,this.indexArray=i,this.gl=o,this.initVAO(h)}var e,i,s;return e=t,s=[{key:"PrimitiveConstructor",value:function(e,i,s,r,n,a,o){return new t(new Float32Array(e.vertices.flatMap((function(t){return[].concat(H(t.position),H(t.color),H(t.texcoord),H(t.normal))}))),new Uint16Array(e.indices),i,s,r,n,a,o)}}],(i=[{key:"initVAO",value:function(t){this.vao=this.gl.createVertexArray(),this.gl.bindVertexArray(this.vao),this.vbo=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertexArray,this.gl.STATIC_DRAW),this.indexArray.length>0&&(this.ebo=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.ebo),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.indexArray,this.gl.STATIC_DRAW));var e=this.gl.getAttribLocation(t.program,"vertex_position");this.gl.vertexAttribPointer(e,3,this.gl.FLOAT,!1,44,0),this.gl.enableVertexAttribArray(e);var i=this.gl.getAttribLocation(t.program,"vertex_color");this.gl.vertexAttribPointer(i,3,this.gl.FLOAT,!1,44,12),this.gl.enableVertexAttribArray(i);var s=this.gl.getAttribLocation(t.program,"vertex_texcoord");this.gl.vertexAttribPointer(s,2,this.gl.FLOAT,!1,44,24),this.gl.enableVertexAttribArray(s);var r=this.gl.getAttribLocation(t.program,"vertex_normal");this.gl.vertexAttribPointer(r,3,this.gl.FLOAT,!1,44,32),this.gl.enableVertexAttribArray(r),this.gl.bindAttribLocation(t.program,0,"vertex_position"),this.gl.bindAttribLocation(t.program,1,"vertex_color"),this.gl.bindAttribLocation(t.program,2,"vertex_texcoord"),this.gl.bindAttribLocation(t.program,3,"vertex_normal"),this.gl.bindVertexArray(null)}},{key:"updateUniforms",value:function(t){t.setMat4fv(this.ModelMatrix,"ModelMatrix")}},{key:"move",value:function(t){o(this.position,this.position,t)}},{key:"updateModelMatrix",value:function(){var t,e,i,s,r,a,o,h,u,l,g,p,v;this.ModelMatrix=c(),f(this.ModelMatrix,this.ModelMatrix,this.origin),t=this.ModelMatrix,e=this.ModelMatrix,i=Math.radians(this.rotation[0]),s=Math.sin(i),r=Math.cos(i),a=e[4],o=e[5],h=e[6],u=e[7],l=e[8],g=e[9],p=e[10],v=e[11],e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*r+l*s,t[5]=o*r+g*s,t[6]=h*r+p*s,t[7]=u*r+v*s,t[8]=l*r-a*s,t[9]=g*r-o*s,t[10]=p*r-h*s,t[11]=v*r-u*s,function(t,e,i){var s=Math.sin(i),r=Math.cos(i),n=e[0],a=e[1],o=e[2],h=e[3],u=e[8],l=e[9],c=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*r-u*s,t[1]=a*r-l*s,t[2]=o*r-c*s,t[3]=h*r-f*s,t[8]=n*s+u*r,t[9]=a*s+l*r,t[10]=o*s+c*r,t[11]=h*s+f*r}(this.ModelMatrix,this.ModelMatrix,Math.radians(this.rotation[1])),function(t,e,i){var s=Math.sin(i),r=Math.cos(i),n=e[0],a=e[1],o=e[2],h=e[3],u=e[4],l=e[5],c=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*r+u*s,t[1]=a*r+l*s,t[2]=o*r+c*s,t[3]=h*r+f*s,t[4]=u*r-n*s,t[5]=l*r-a*s,t[6]=c*r-o*s,t[7]=f*r-h*s}(this.ModelMatrix,this.ModelMatrix,Math.radians(this.rotation[2]));var d=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}(n(),this.position,this.origin);f(this.ModelMatrix,this.ModelMatrix,d),function(t,e,i){var s=i[0],r=i[1],n=i[2];t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(this.ModelMatrix,this.ModelMatrix,this.scale)}},{key:"render",value:function(t){this.updateModelMatrix(),this.updateUniforms(t),t.use(),this.gl.bindVertexArray(this.vao),0===this.indexArray.length?this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,this.vertexArray.length):this.gl.drawElements(this.gl.TRIANGLES,this.indexArray.length,this.gl.UNSIGNED_SHORT,0),this.gl.bindVertexArray(null),this.gl.useProgram(null),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}}])&&G(e.prototype,i),s&&G(e,s),t}();function K(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var z=function(){function t(e,i,s,r,n){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=e,this.material=i,this.overrideTextureDiffuse=s,this.overrideTextureSpecular=r,this.meshes=n,this.meshes.forEach((function(t,i){a.meshes[i].move(e)}))}var e,i;return e=t,(i=[{key:"setRotation",value:function(t){var e=this;this.meshes.forEach((function(i,s){e.meshes[s].rotation=t}))}},{key:"setPosition",value:function(t){var e=this;this.meshes.forEach((function(i,s){e.meshes[s].position=t}))}},{key:"setScale",value:function(t){var e=this;this.meshes.forEach((function(i,s){e.meshes[s].scale=t}))}},{key:"render",value:function(t){var e=this;this.material.sendToShader(t),t.use(),this.meshes.forEach((function(i){e.overrideTextureDiffuse.bind(0),e.overrideTextureSpecular.bind(1),i.render(t)}))}}])&&K(e.prototype,i),t}();function $(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var Q=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a(1,1,1),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.045,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.0075;$(this,t),this.position=e,this.constant=r,this.linear=n,this.quadratic=o,this.intensity=i,this.color=s}var e,i;return e=t,(i=[{key:"setPosition",value:function(t){this.position=t}},{key:"sendToShader",value:function(t){t.set3fv(this.position,"pointLight.position"),t.set1f(this.intensity,"pointLight.intensity"),t.set3fv(this.color,"pointLight.color"),t.set1f(this.constant,"pointLight.constant"),t.set1f(this.linear,"pointLight.linear"),t.set1f(this.quadratic,"pointLight.quadratic")}}])&&J(e.prototype,i),t}();function Z(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}new(function(){function t(e,i,s,n,o){var h=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=o,this.window=null,this.framebufferWidth=i,this.framebufferHeight=s,this.camPosition=a(0,0,10),this.worldUp=a(0,1,0),this.camFront=a(0,0,-1),this.camera=new A(this.camPosition,this.worldUp),this.fov=90,this.nearPlane=.1,this.farPlane=1e3,this.dt=0,this.curTime=0,this.lastTime=0,this.lastMouseX=0,this.lastMouseY=0,this.mouseX=0,this.mouseY=0,this.mouseOffsetX=0,this.mouseOffsetY=0,this.firstMouse=!0,document.addEventListener("keydown",(function(t){h.updateKeyboardInput(t)}));var u=function(t){h.updateMouseInput(t)};document.addEventListener("mousedown",(function(t){var e,i;0===t.button&&document.addEventListener("mousemove",u),2===t.button&&(t.preventDefault(),h.pointLights[0].position=(e=h.camera.position,(i=new r(3))[0]=e[0],i[1]=e[1],i[2]=e[2],i))})),document.addEventListener("mouseup",(function(t){0===t.button&&(document.removeEventListener("mousemove",u),h.firstMouse=!0)})),this.initOpenGLOptions(),this.initMatrices(),this.initShaders(),this.initTextures(),this.initMaterials(),this.initModels(),this.initLights(),this.initUniforms()}var e,i;return e=t,(i=[{key:"initOpenGLOptions",value:function(){this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK),this.gl.frontFace(this.gl.CCW),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)}},{key:"initMatrices",value:function(){this.ViewMatrix=c();var t=o(n(),this.camPosition,this.camFront);p(this.ViewMatrix,this.camPosition,t,this.worldUp),this.ProjectionMatrix=c(),g(this.ProjectionMatrix,Math.radians(this.fov),this.framebufferWidth/this.framebufferHeight,this.nearPlane,this.farPlane)}},{key:"initShaders",value:function(){this.shaders=[],this.shaders.push(new x(this.gl))}},{key:"initTextures",value:function(){this.textures=[],this.textures.push(new P(v,this.gl.TEXTURE_2D,this.gl)),this.textures.push(new P(d,this.gl.TEXTURE_2D,this.gl)),this.textures.push(new P(m,this.gl.TEXTURE_2D,this.gl)),this.textures.push(new P(y,this.gl.TEXTURE_2D,this.gl)),this.textures.push(new P(b,this.gl.TEXTURE_2D,this.gl)),this.textures.push(new P(M,this.gl.TEXTURE_2D,this.gl))}},{key:"initMaterials",value:function(){this.materials=[],this.materials.push(new L(a(.5,.5,.5),a(1,1,1),a(1,1,1),0,1)),this.materials.push(new L(a(.5,.5,.5),a(1,1,1),a(1,1,1),0,1)),this.materials.push(new L(a(.5,.5,.5),a(1,1,1),a(1,1,1),0,1))}},{key:"initModels",value:function(){var t=[],e=[],i=[];t.push(q.PrimitiveConstructor(new Y,a(1,0,0),a(0,0,0),a(0,0,0),a(1,1,1),this.gl,this.shaders[0])),t.push(q.PrimitiveConstructor(new N,a(0,0,0),a(0,0,0),a(0,0,0),a(1,1,1),this.gl,this.shaders[0])),e.push(q.PrimitiveConstructor(new N,a(0,0,0),a(0,0,0),a(-90,0,0),a(100,100,100),this.gl,this.shaders[0])),i.push(q.PrimitiveConstructor(new N,a(1,0,0),a(0,0,0),a(0,0,0),a(1,1,1),this.gl,this.shaders[0])),this.models=[],this.models.push(new z(a(0,0,0),this.materials[0],this.textures[0],this.textures[1],t)),this.models.push(new z(a(2,0,-10),this.materials[1],this.textures[2],this.textures[3],e)),this.models.push(new z(a(2,0,0),this.materials[2],this.textures[2],this.textures[3],i))}},{key:"initPointLights",value:function(){this.pointLights=[],this.pointLights.push(new Q(a(0,0,0)))}},{key:"initLights",value:function(){this.initPointLights()}},{key:"initUniforms",value:function(){var t=this;this.shaders[0].setMat4fv(this.ViewMatrix,"ViewMatrix"),this.shaders[0].setMat4fv(this.ProjectionMatrix,"ProjectionMatrix"),this.pointLights.forEach((function(e){e.sendToShader(t.shaders[0])}))}},{key:"updateUniforms",value:function(){var t=this;this.ViewMatrix=this.camera.getViewMatrix(),this.shaders[0].setMat4fv(this.ViewMatrix,"ViewMatrix"),this.shaders[0].set3fv(this.camera.getPosition(),"cameraPos"),this.pointLights.forEach((function(e){e.sendToShader(t.shaders[0])})),g(this.ProjectionMatrix,Math.radians(this.fov),this.framebufferWidth/this.framebufferHeight,this.nearPlane,this.farPlane),this.shaders[0].setMat4fv(this.ProjectionMatrix,"ProjectionMatrix")}},{key:"resizeWindow",value:function(){var t=this.gl.canvas.clientWidth,e=this.gl.canvas.clientHeight;this.gl.canvas.width===t&&this.gl.canvas.height===e||(this.gl.canvas.width=t,this.gl.canvas.height=e)}},{key:"updateMouseInput",value:function(t){var e=this.gl.canvas.getBoundingClientRect(),i=t.pageX-e.left,s=t.pageY-e.top;this.firstMouse&&(this.lastMouseX=i,this.lastMouseY=s,this.firstMouse=!1),i-this.lastMouseX>1||i-this.lastMouseX<-1?this.mouseOffsetX=i-this.lastMouseX:this.mouseOffsetX=0,s-this.lastMouseY>1||s-this.lastMouseY<-1?this.mouseOffsetY=s-this.lastMouseY:this.mouseOffsetY=0,this.lastMouseX=i,this.lastMouseY=s}},{key:"updateKeyboardInput",value:function(t){"w"===t.key&&this.camera.move(this.dt,1),"s"===t.key&&this.camera.move(this.dt,2),"a"===t.key&&this.camera.move(this.dt,3),"d"===t.key&&this.camera.move(this.dt,4),"c"===t.key&&this.camera.move(this.dt,5),"v"===t.key&&this.camera.move(this.dt,6)}},{key:"update",value:function(){var t=this;this.curTime=performance.now(),this.dt=this.curTime-this.lastTime,this.lastTime=this.curTime,this.camera.updateInput(.1*this.dt,this.mouseOffsetX,this.mouseOffsetY),this.render(),requestAnimationFrame((function(e){t.update(e)}))}},{key:"render",value:function(){var t=this;this.resizeWindow(),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT,this.gl.DEPTH_BUFFER_BIT,this.gl.STENCIL_BUFFER_BIT),this.updateUniforms(),this.shaders[0].use(),this.models.forEach((function(e){e.render(t.shaders[0])})),this.gl.flush(),this.gl.bindVertexArray(null),this.gl.useProgram(null),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"framebuffer_resize_callback",value:function(t,e){this.gl.Viewport(0,0,t,e)}}])&&Z(e.prototype,i),t}())("title",1e3,900,!1,document.querySelector("#canvas").getContext("webgl2")).update(0)},485:(t,e,i)=>{"use strict";t.exports=i.p+"./132dd56710677ff0f4ae.png"},537:(t,e,i)=>{"use strict";t.exports=i.p+"./b6dc68b42b802d455d20.png"},970:(t,e,i)=>{"use strict";t.exports=i.p+"./32b0e508afd1d2cf57b4.png"},677:(t,e,i)=>{"use strict";t.exports=i.p+"./e0d4d28ab955d6b5e58b.png"},820:(t,e,i)=>{"use strict";t.exports=i.p+"./6abd2cfaf86ff2c3108c.png"},422:(t,e,i)=>{"use strict";t.exports=i.p+"./55e5ea6f77204a377d2a.png"}},t=>{"use strict";t(t.s=733)}]);